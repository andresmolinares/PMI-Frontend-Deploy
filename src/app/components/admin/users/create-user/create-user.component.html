<!--=============== CREATE NEW USER ===============-->
<section class="section__create-user">

    <div class="section__container container grid">
        <div>
            <h3 class="section__title">Nuevo usuario <span><i class='bx bx-user-circle bx-sm'></i></span></h3>

            <form autocomplete="off" [formGroup]="registerForm" (ngSubmit)="onSubmit(registerForm)">

                <ng-container *ngIf="name != null">
                    <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
                        <div *ngIf="name.errors?.['required']">
                            El nombre es requerido.
                        </div>
                        <div *ngIf="name.errors?.['minlength']">
                            El nombre debe ser minimo de 3 caracteres.
                        </div>
                        <div *ngIf="name.errors?.['maxlength']">
                            El nombre debe ser maximo de 100 caracteres.
                        </div>
                    </div>
                </ng-container>
                <div class="form-div">
                    <label for="name" class="form-tag">Nombre Completo *</label>
                    <input id="name" formControlName="name" type="text" placeholder="Ingresa el nombre completo"
                        class="form-input" required>
                </div>

                <ng-container *ngIf="email != null">
                    <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
                        <div *ngIf="email.errors?.['required']">
                            El correo electronico es requerido.
                        </div>
                        <div *ngIf="email.errors?.['email']">
                            Debe ingresar un correo electronico valido.
                        </div>
                    </div>
                </ng-container>
                <div class="form-div">
                    <label for="email" class="form-tag">Correo electrónico *</label>
                    <input formControlName="email" type="email" placeholder="Ingresa el correo electrónico"
                        class="form-input" required>
                </div>

                <ng-container *ngIf="role != null">
                    <div *ngIf="role.invalid && (role.dirty || role.touched)" class="alert alert-danger">
                        <div *ngIf="role.errors?.['required']">
                            El rol de usuario es requerido.
                        </div>
                    </div>
                </ng-container>
                <div class="form-div">
                    <label for="role" class="form-tag">Rol de usuario *</label>
                    <select formControlName="role" class="custom-select" required>
                        <option selected disabled value="">Selecciona un rol</option>
                        <option value="administrador">Administrador</option>
                        <option value="electroencefalograma">Electroencefalograma</option>
                        <option value="prueba psicologica">Prueba psicológica</option>
                        <option value="resonancia Magnetica">Resonancia Magnetica</option>
                    </select>
                </div>

                <ng-container *ngIf="username != null">
                    <div *ngIf="username.invalid && (username.dirty || username.touched)" class="alert alert-danger">
                        <div *ngIf="username.errors?.['required']">
                            El usuario es requerido.
                        </div>
                        <div *ngIf="username.errors?.['minlength']">
                            El usuario debe ser minimo de 3 caracteres.
                        </div>
                        <div *ngIf="username.errors?.['maxlength']">
                            El usuario debe ser maximo de 50 caracteres.
                        </div>
                        <div *ngIf="username.errors?.['pattern']">
                            El usuario solo puede contener letras minúsculas, números y guion bajo.
                        </div>
                    </div>
                </ng-container>
                <div class="form-div">
                    <label for="username" class="form-tag">Usuario *</label>
                    <input formControlName="username" type="text" placeholder="Ingresa el usuario"
                        class="form-input" required>
                </div>

                <ng-container *ngIf="password != null">
                    <div *ngIf="password.invalid && (password.dirty || password.touched)" class="alert alert-danger">
                        <div *ngIf="password.errors?.['required']">
                            La contraseña es requerida.
                        </div>
                        <div *ngIf="password.errors?.['minlength']">
                            La contraseña debe ser minimo de 6 caracteres.
                        </div>
                        <div *ngIf="password.errors?.['maxlength']">
                            La contraseña debe ser maximo de 100 caracteres.
                        </div>
                    </div>
                </ng-container>
                <div class="form-div">
                    <label for="password" class="form-tag">Contraseña *</label>
                    <input formControlName="password" type="password" placeholder="Ingresa la contraseña"
                        class="form-input" required>
                </div>

                <ng-container *ngIf="confirm_password != null">
                    <div *ngIf="confirm_password.invalid && (confirm_password.dirty || confirm_password.touched)" class="alert alert-danger">
                        <div *ngIf="confirm_password.errors?.['required']">
                            La confirmacion de contraseña es requerida.
                        </div>
                        <div *ngIf="confirm_password.errors?.['mustMatch']">
                            No coinciden las contraseñas.
                        </div>
                    </div>
                </ng-container>
                <div class="form-div">
                    <label for="confirm_password" class="form-tag">Confirmar Contraseña *</label>
                    <input formControlName="confirm_password" type="password"
                        placeholder="Ingresa nuevamente la contraseña" class="form-input" required>
                </div>

                <ng-container *ngIf="!btnIsLoading">
                    <button [disabled]="registerForm.invalid" type="submit" class="button">Guardar usuario</button>
                </ng-container>
                <ng-container *ngIf="btnIsLoading">
                    <button disabled class="button__loader"><span class="button__text">Guardando usuario...</span></button>
                </ng-container>
            </form>

        </div>
    </div>
</section>